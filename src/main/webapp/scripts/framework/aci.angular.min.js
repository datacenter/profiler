!function(e,define){define(["./aci.core.min"],e)}(function(){return function(e,t,i){"use strict";function n(e){var t=S;try{return S=function(e){return e()},e()}finally{S=t}}function r(e,n,r,a){n[r]=t.copy(e.$eval(a)),n[r]===i&&a.match(/^\w*$/)&&k.warn(r+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+a+"'?")}function a(n,a,c,d,m,v){function _(){var i,v,_,w,b,C,S,T,k,P,M,z,F;return c.aRebind&&(i=e(e(a)[0].cloneNode(!0))),v=d.replace(/^aci/,""),_=t.extend({},c.defaultOptions,n.$eval(c.aOptions||c.options)),(w=e(a)[d])?(b=w.widget.prototype.options,C=w.widget.prototype.events,e.each(c,function(e,t){var i,a,o,s;"source"!==e&&"aDataSource"!==e&&"aScopeField"!==e&&(i="data"+e.charAt(0).toUpperCase()+e.slice(1),0===e.indexOf("on")&&(a=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()}),C.indexOf(a)>-1&&(_[a]=t)),b.hasOwnProperty(i)?r(n,_,i,t):b.hasOwnProperty(e)&&!I[e]?r(n,_,e,t):E[e]||(o=e.match(/^a(On)?([A-Z].*)/),o&&(s=o[2].charAt(0).toLowerCase()+o[2].slice(1),o[1]&&"aOnLabel"!=e?_[s]=t:("aOnLabel"==e&&(s="onLabel"),r(n,_,s,t)))))}),S=c.aDataSource||c.source,S&&(_.dataSource=A(n,a,v,S)),_.$angular=[n],a.is("select")&&!function(t){if(t.length>0){var i=e(t[0]);!/\S/.test(i.text())&&/^\?/.test(i.val())&&i.remove()}}(a[0].options),T=w.call(a,D=_).data(d),l(T,n,c,d,m),n.$emit("aciWidgetCreated",T),k=p(n,T),c.aRebind&&g(T,n,a,i,c.aRebind,k,c),c.aNgDisabled&&(P=c.aNgDisabled,M=n.$eval(P),M&&T.enable(!M),o(T,n,a,P)),c.aNgReadonly&&(z=c.aNgReadonly,F=n.$eval(z),F&&T.readonly(F),s(T,n,a,z)),c.aNgModel&&h(T,n,c.aNgModel),y&&u(T,n,a,y,x),T&&f(T,a),T):(window.console.error("Could not find: "+d),null)}var w,b,y,x,C,T;if(!(a instanceof jQuery))throw Error("The Aci UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");return w=c.aNgDelay,b=n.$eval(w),v=v||[],y=v[0],x=v[1],w&&!b?(C=n.$root||n,T=function(){var e=n.$watch(w,function(t,i){t!==i&&(e(),a.removeAttr(c.$attr.aNgDelay),w=null,S(_))})},/^\$(digest|apply)$/.test(C.$$phase)?T():n.$apply(T),i):_()}function o(e,t,n,r){return aci.ui.PanelBar&&e instanceof aci.ui.PanelBar||aci.ui.Menu&&e instanceof aci.ui.Menu?(k.warn("a-ng-disabled specified on a widget that does not have the enable() method: "+e.options.name),i):(t.$watch(r,function(t,i){t!=i&&e.enable(!t)}),i)}function s(e,t,n,r){return"function"!=typeof e.readonly?(k.warn("a-ng-readonly specified on a widget that does not have the readonly() method: "+e.options.name),i):(t.$watch(r,function(t,i){t!=i&&e.readonly(t)}),i)}function l(e,t,i,n,r){if(i[r]){var a=C(i[r]).assign;if(!a)throw Error(r+" attribute used but expression in it is not assignable: "+i[n]);a(t,e)}}function c(e){return/checkbox|radio/i.test(e.attr("type"))?e.prop("checked"):e.val()}function d(e){return P.test(e[0].tagName)}function u(e,t,n,r,a){var o,s,l,u;e.value&&(o=d(n)?function(){return c(n)}:function(){return e.value()},r.$render=function(){var t=r.$viewValue;t===i&&(t=r.$modelValue),t===i&&(t=null),setTimeout(function(){e&&e.value(t)},0)},s=!1,d(n)&&n.on("change",function(){s=!0}),l=function(e){return function(){var i;s||(s=!1,e&&a&&(i=a.$pristine),r.$setViewValue(o()),e&&(r.$setPristine(),i&&a.$setPristine()),_(t))}},e.first("change",l(!1)),aci.ui.AutoComplete&&e instanceof aci.ui.AutoComplete||e.first("dataBound",l(!0)),u=o(),u!=r.$viewValue&&(r.$isEmpty(r.$viewValue)?null!=u&&""!==u&&u!=r.$viewValue&&r.$setViewValue(u):e.value(r.$viewValue)),r.$setPristine())}function h(t,n,r){var a,o,s,l,c,d;return"function"!=typeof t.value?(k.warn("a-ng-model specified on a widget that does not have the value() method: "+t.options.name),i):(a=e(t.element).parents("form"),o=n[a.attr("name")],s=C(r),l=s.assign,c=!1,t.$angular_setLogicValue(s(n)),d=function(e,n){e===i&&(e=null),c||e!==n&&t.$angular_setLogicValue(e)},aci.ui.MultiSelect&&t instanceof aci.ui.MultiSelect?n.$watchCollection(r,d):n.$watch(r,d),t.first("change",function(){c=!0,o&&o.$pristine&&o.$setDirty(),n.$apply(function(){l(n,t.$angular_getLogicValue())}),c=!1}),i)}function p(e,t){var i=e.$on("$destroy",function(){i(),t&&(t.element&&(t=v(t.element),t&&t.destroy()),t=null)});return i}function f(t,i){function n(){o.disconnect()}function r(){o.observe(e(i)[0],{attributes:!0})}var a,o;window.MutationObserver&&t.wrapper&&(a=[].slice.call(e(i)[0].classList),o=new MutationObserver(function(i){n(),t&&(i.forEach(function(i){var n,r=e(t.wrapper)[0];switch(i.attributeName){case"class":n=[].slice.call(i.target.classList),n.forEach(function(e){a.indexOf(e)<0&&(r.classList.add(e),aci.ui.ComboBox&&t instanceof aci.ui.ComboBox&&t.input[0].classList.add(e))}),a.forEach(function(e){n.indexOf(e)<0&&(r.classList.remove(e),aci.ui.ComboBox&&t instanceof aci.ui.ComboBox&&t.input[0].classList.remove(e))}),a=n;break;case"disabled":"function"==typeof t.enable&&t.enable(!e(i.target).attr("disabled"));break;case"readonly":"function"==typeof t.readonly&&t.readonly(!!e(i.target).attr("readonly"))}}),r())}),r(),t.first("destroy",n))}function g(t,i,n,r,a,o,s){var l=i.$watch(a,function(a,c){var d,u,h,p;a!==c&&(l(),d=H[t.options.name],d&&d.forEach(function(t){var n=i.$eval(s["a"+t]);n&&r.append(e(n).attr(aci.toHyphens("a"+t),""))}),u=e(t.wrapper)[0],h=e(t.element)[0],p=n.injector().get("$compile"),t._destroy(),o&&o(),t=null,u&&h&&(u.parentNode.replaceChild(h,u),e(n).replaceWith(r)),p(r)(i))},!0);_(i)}function m(e,i){function n(e,t){y.directive(e,["directiveFactory",function(i){return i.create(t,e)}])}var r,a,o,s,l=i?"Mobile":"";l+=e.fn.options.name,r=l,a="aci"+l.charAt(0)+l.substr(1).toLowerCase(),l="aci"+l,o=l.replace(/([A-Z])/g,"-$1"),-1==z.indexOf(l.replace("aci",""))&&(s=l===a?[l]:[l,a],t.forEach(s,function(e){y.directive(e,function(){return{restrict:"E",replace:!0,template:function(e,t){var i=M[r]||"div",n=t.aScopeField;return"<"+i+" "+o+(n?'="'+n+'"':"")+">"+e.html()+"</"+i+">"}}})})),F.indexOf(l.replace("aci",""))>-1||(n(l,l),a!=l&&n(a,l))}function v(t){return t=e(t),aci.widgetInstance(t,aci.ui)||aci.widgetInstance(t,aci.mobile.ui)||aci.widgetInstance(t,aci.dataviz.ui)}function _(e,t){var i=e.$root||e,n=/^\$(digest|apply)$/.test(i.$$phase);t?n?t():i.$apply(t):n||i.$digest()}function w(t,i){t.$destroy(),i&&e(i).removeData("$scope").removeData("$$aciScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function b(i,n,r){var a,o,s;if(e.isArray(i))return t.forEach(i,function(e){b(e,n,r)});if("string"==typeof i){for(a=i.split("."),o=aci;o&&a.length>0;)o=o[a.shift()];if(!o)return R.push([i,n,r]),!1;i=o.prototype}return s=i[n],i[n]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return s.apply(e,arguments.length>0?arguments:t)}},t)},!0}var y,x,C,S,T,k,D,A,E,I,P,M,z,F,R,H;t&&(y=t.module("aci.directives",[]),x=t.injector(["ng"]),C=x.get("$parse"),S=x.get("$timeout"),k=x.get("$log"),A=function(){var e={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},t=function(e,t){return"$PLAIN"==t?e:aci.data[t].create(e)};return function(i,n,r,a){var o=e[r]||"DataSource",s=t(i.$eval(a),o);return i.$watch(a,function(e,i){var r,a;e!==i&&(r=t(e,o),a=v(n),a&&"function"==typeof a.setDataSource&&a.setDataSource(r))}),s}}(),E={aDataSource:!0,aOptions:!0,aRebind:!0,aNgModel:!0,aNgDelay:!0},I={name:!0,title:!0,style:!0},P=/^(input|select|textarea)$/i,y.factory("directiveFactory",["$compile",function(t){var i,n,r=!1;return T=t,n=function(t,n){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){var i=this;i.template=function(e,i){t[e]=aci.stringify(i)},e.$on("$destroy",function(){i.template=null,i=null})}],link:function(o,s,l,c){var d,u=e(s),h=t.replace(/([A-Z])/g,"-$1");u.attr(h,u.attr("data-"+h)),u[0].removeAttribute("data-"+h),d=a(o,s,l,t,n,c),d&&(i&&clearTimeout(i),i=setTimeout(function(){o.$emit("aciRendered"),r||(r=!0,e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))}))}}},{create:n}}]),M={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},z=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],F=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"],t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(e){F.push(e),e="aci"+e,y.directive(e,function(){return{restrict:"A",link:function(t,i,n){a(t,i,n,e,e)}}})}),function(){function e(e){return function(i){t.forEach(i,function(t){t.fn&&t.fn.options&&t.fn.options.name&&/^[A-Z]/.test(t.fn.options.name)&&m(t,e)})}}t.forEach([aci.ui,aci.dataviz&&aci.dataviz.ui],e(!1)),t.forEach([aci.mobile&&aci.mobile.ui],e(!0))}(),R=[],b(aci.ui,"plugin",function(t,i,n){this.next(),R=e.grep(R,function(e){return!b.apply(null,e)}),m(t,"Mobile"==n)}),b(["ui.Widget","mobile.ui.Widget"],"angular",function(r,a){var o,s=this.self;return"init"==r?(!a&&D&&(a=D),D=null,a&&a.$angular&&(s.$angular_scope=a.$angular[0],s.$angular_init(s.element,a)),i):(o=s.$angular_scope,o&&n(function(){var n,l,c=a(),d=c.elements,u=c.data;if(d.length>0)switch(r){case"cleanup":t.forEach(d,function(t){var i=e(t).data("$$aciScope");i&&i!==o&&i.$$aciScope&&w(i,t)});break;case"compile":n=s.element.injector(),l=n?n.get("$compile"):T,t.forEach(d,function(t,n){var r,a;c.scopeFrom?r=c.scopeFrom:(a=u&&u[n],a!==i?(r=e.extend(o.$new(),a),r.$$aciScope=!0):r=o),e(t).data("$$aciScope",r),l(t)(r)}),_(o)}}),i)}),b("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),b("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),b("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem(),t=this.self.options.dataValueField;return e?this.self.options.valuePrimitive?t?e[t]:e:e.toJSON():null}),b("ui.Select","$angular_setLogicValue",function(e){var t=this.self,n=t.options,r=n.dataValueField,a=n.text||"";e===i&&(e=""),r&&!n.valuePrimitive&&e&&(a=e[n.dataTextField]||"",e=e[r||n.dataTextField]),t.options.autoBind!==!1||t.listView.isBound()?t.value(e):!a&&e&&n.valuePrimitive?t.value(e):t._preselect(e,a)}),b("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems().slice(0),i=this.self.options.dataValueField;return i&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),t}),b("ui.MultiSelect","$angular_setLogicValue",function(t){var i,n,r,a;null==t&&(t=[]),i=this.self,n=i.options,r=n.dataValueField,a=t,r&&!n.valuePrimitive&&(t=e.map(t,function(e){return e[r]})),n.autoBind!==!1||n.valuePrimitive||i.listView.isBound()?i.value(t):i._preselect(a,t)}),b("ui.AutoComplete","$angular_getLogicValue",function(){var e,t,i,n,r,a=this.self.options,o=this.self.value().split(a.separator),s=a.valuePrimitive,l=this.self.dataSource.data(),c=[];for(e=0,t=l.length;t>e;e++)for(i=l[e],n=a.dataTextField?i[a.dataTextField]:i,r=0;o.length>r;r++)if(n===o[r]){c.push(s?n:i.toJSON());break}return c}),b("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var i=this.self,n=i.options.dataTextField;n&&!i.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),i.value(t)}),b("ui.Widget","$angular_init",function(t,i){var n,r,a,o,s=this.self;if(i&&!e.isArray(i))for(n=s.$angular_scope,r=s.events.length;--r>=0;)a=s.events[r],o=i[a],o&&"string"==typeof o&&(i[a]=s.$angular_makeEventHandler(a,n,o))}),b("ui.Widget","$angular_makeEventHandler",function(e,t,i){return i=C(i),function(e){_(t,function(){i(t,{aciEvent:e})})}}),b(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,i,n){return"change"!=e?this.next():(n=C(n),function(e){var r,a,o,s,l,c,d,u,h,p=e.sender,f=p.options,g={aciEvent:e};for(t.isString(f.selectable)&&(r=-1!==f.selectable.indexOf("cell"),a=-1!==f.selectable.indexOf("multiple")),o=g.selected=this.select(),s=g.data=[],l=g.columns=[],d=0;o.length>d;d++)u=r?o[d].parentNode:o[d],h=p.dataItem(u),r?(t.element.inArray(h,s)<0&&s.push(h),c=t.element(o[d]).index(),t.element.inArray(c,l)<0&&l.push(c)):s.push(h);a||(g.dataItem=g.data=s[0],g.selected=o[0]),_(i,function(){n(i,g)})})}),b("ui.Grid","$angular_init",function(n,r){if(this.next(),r.columns){var a=e.extend({},aci.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==i&&!e.encoded||(e.template="<span ng-bind='"+aci.expr(e.field,"dataItem")+"'>#: "+aci.expr(e.field,a.paramName)+"#</span>")})}}),b("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.am-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),b("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),y.directive("aciMobileApplication",function(){return{terminal:!0,link:function(e,t,i){a(e,t,i,"aciMobileApplication","aciMobileApplication")}}}).directive("aciMobileView",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=a(e,t,i,"aciMobileView","aciMobileView")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("aciMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=a(e,t,i,"aciMobileDrawer","aciMobileDrawer")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("aciMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=a(e,t,i,"aciMobileModalView","aciMobileModalView")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("aciMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=a(e,t,i,"aciMobileSplitView","aciMobileSplitView")},post:function(e,t,i){i._instance._layout()}}}}).directive("aciMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,a(e,t,i,"aciMobilePane","aciMobilePane")}}}}).directive("aciMobileLayout",function(){return{link:{pre:function(e,t,i){a(e,t,i,"aciMobileLayout","aciMobileLayout")}}}}).directive("aciMobileActionSheet",function(){return{restrict:"A",link:function(t,i,n){i.find("a[a-action]").each(function(){e(this).attr("data-"+aci.ns+"action",e(this).attr("a-action"))}),a(t,i,n,"aciMobileActionSheet","aciMobileActionSheet")}}}).directive("aciMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,a(e,t,i,"aciMobilePopOver","aciMobilePopOver")}}}}).directive("aciViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+aci.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("aciMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("am-header").attr("data-role","header")}}}).directive("aciMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("am-footer").attr("data-role","footer")}}}).directive("aciMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+aci.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="a"+e.slice(0,1).toUpperCase()+e.slice(1);y.directive(t,function(){return{restrict:"A",priority:2,link:function(i,n,r){n.attr(aci.attr(aci.toHyphens(e)),i.$eval(r[t]))}}})}),H={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var e={};t.forEach(H,function(i,n){t.forEach(i,function(t){e[t]||(e[t]=[]),e[t].push("?^^aci"+n)})}),t.forEach(e,function(e,t){var i="a"+t,n=aci.toHyphens(i);y.directive(i,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[i]){t.removeAttr(n);var a=t[0].outerHTML;return function(r,o,s,l){for(var c;!c&&l.length;)c=l.shift();c?(c.template(i,a),t.remove()):k.warn(n+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}())}(window.aci.jQuery,window.angular),window.aci},"function"==typeof define&&define.amd?define:function(e,t){t()});